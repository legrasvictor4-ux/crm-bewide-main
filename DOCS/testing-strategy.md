# Testing Strategy

- **Unit**: Pure functions, services, hooks. Use Vitest. Cover success + error paths and boundary cases.
- **UI (RTL)**: Components render loading/empty/error/success states; interactions (filters, dialogs, forms).
- **API Integration (supertest)**: Exercise key routes (`/api/clients`, `/api/clients/lead-score`, `/api/import/excel`), assert status, payload shape, and error contracts.
- **E2E (Playwright/Cypress)**: Critical flows: login, add client (manual + voice), filter/sort/paginate, import summary, map view navigation.
- **Coverage**: Minimum 80% lines/functions; generated by `vitest --coverage` in CI and locally. Thresholds enforced in `vitest.config.ts`.
- **Commands**:
  ```sh
  npm run lint
  npm run test -- --coverage
  npm run test:ui -- --coverage
  npm run test:api
  ```
